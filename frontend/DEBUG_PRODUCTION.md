# Отладка проблем в продакшене

## Проблема: Верстка отличается от локальной версии

### Возможные причины и решения:

1. **CSS не загружается**
   - Проверьте в DevTools (F12) → Network → найдите файл `.css`
   - Убедитесь, что файл загружается (статус 200)
   - Проверьте, что путь к CSS правильный в `index.html`

2. **Tailwind CSS не компилируется**
   - Убедитесь, что `tailwind.config.js` правильно настроен
   - Проверьте, что `postcss.config.js` существует
   - Пересоберите проект: `npm run build`

3. **Проблемы с путями к ресурсам**
   - В `vite.config.ts` должен быть `base: '/'`
   - Проверьте, что все импорты используют относительные пути

## Проблема: Кнопка "Скачать отчет" не отображается

### Проверка:

1. **Откройте консоль браузера (F12)**
   - Проверьте наличие ошибок JavaScript
   - Ищите ошибки связанные с `jspdf` или `generateReport`

2. **Проверьте, что jsPDF загружается:**
   ```javascript
   // В консоли браузера выполните:
   import('jspdf').then(module => console.log('jsPDF загружен:', module))
   ```

3. **Проверьте компонент Step4Results:**
   - Убедитесь, что кнопка не скрыта условием `!showFeedback`
   - Проверьте, что `testData` и `results` переданы правильно

### Решение:

Если jsPDF не загружается, попробуйте:

1. **Проверьте package.json:**
   ```json
   "jspdf": "^4.0.0"
   ```

2. **Переустановите зависимости:**
   ```bash
   cd frontend
   rm -rf node_modules package-lock.json
   npm install
   npm run build
   ```

3. **Проверьте размер бандла:**
   - jsPDF должен быть включен в сборку
   - Проверьте `dist/assets/` - должны быть файлы с jsPDF

## Проблема: Ошибки в консоли

### Типичные ошибки:

1. **"Cannot find module 'jspdf'"**
   - Решение: Переустановите зависимости и пересоберите

2. **"generatePDFReport is not a function"**
   - Решение: Проверьте экспорт функции в `generateReport.ts`

3. **CORS ошибки**
   - Решение: Проверьте настройки CORS на сервере (Vercel/Netlify)

## Проверка в DevTools

### Network Tab:
1. Откройте DevTools (F12)
2. Перейдите на вкладку Network
3. Обновите страницу (Ctrl+R)
4. Проверьте:
   - ✅ Все файлы `.js` загружаются (статус 200)
   - ✅ Файл `.css` загружается
   - ✅ Нет ошибок 404

### Console Tab:
1. Откройте Console
2. Проверьте наличие ошибок (красные сообщения)
3. Если есть ошибки - скопируйте их и проверьте

### Application Tab:
1. Проверьте, что все ресурсы кешируются правильно
2. Очистите кеш, если нужно (Clear storage)

## Быстрая проверка

Выполните в консоли браузера на странице с тестом:

```javascript
// Проверка, что React приложение загружено
console.log('React загружен:', typeof React !== 'undefined');

// Проверка, что jsPDF доступен (если используется динамический импорт)
import('jspdf').then(m => console.log('jsPDF:', m)).catch(e => console.error('jsPDF ошибка:', e));

// Проверка компонента
const root = document.getElementById('root');
console.log('Root элемент:', root);
console.log('Root содержимое:', root?.innerHTML.substring(0, 100));
```

## Решение проблем с версткой

### Если стили не применяются:

1. **Проверьте, что Tailwind компилируется:**
   ```bash
   cd frontend
   npm run build
   # Проверьте dist/assets/index-*.css
   ```

2. **Проверьте порядок загрузки CSS:**
   - CSS должен загружаться до JavaScript
   - Проверьте `<link>` теги в `index.html`

3. **Проверьте специфичность CSS:**
   - Используйте DevTools → Elements → выберите элемент
   - Проверьте, какие стили применяются
   - Убедитесь, что Tailwind классы не переопределяются

## Проверка на Vercel

1. **Проверьте логи деплоя:**
   - Зайдите в Vercel Dashboard
   - Откройте ваш проект
   - Перейдите в "Deployments"
   - Проверьте логи сборки

2. **Проверьте настройки проекта:**
   - Root Directory: `frontend`
   - Build Command: `npm run build`
   - Output Directory: `dist`

3. **Проверьте переменные окружения:**
   - Убедитесь, что нет конфликтующих переменных

## Тестирование локально перед деплоем

```bash
# 1. Соберите проект
cd frontend
npm run build

# 2. Запустите preview
npm run preview

# 3. Откройте http://localhost:4173
# 4. Проверьте, что все работает как в продакшене
```

## Контакты для поддержки

Если проблема не решается:
1. Проверьте логи в Vercel Dashboard
2. Проверьте консоль браузера
3. Сделайте скриншоты ошибок
4. Проверьте версии зависимостей в `package.json`
